# 054 螺旋矩陣

給你一個 m 行 n 列的矩陣 matrix ，請按照 順時針螺旋順序 ，返回矩陣中的所有元素。

##  Spiral Matrix

Given an m x n matrix, return all elements of the matrix in spiral order.

[LeetCode](https://leetcode-cn.com/problems/spiral-matrix/)


### Example 1

```
Input: matrix = [[1,2,3],[4,5,6],[7,8,9]]
Output: [1,2,3,6,9,8,7,4,5]
```

### Example 2

<img src="img/54_2.jpg" width = "250"/>

```
Input: matrix = [[1,2,3,4],[5,6,7,8],[9,10,11,12]]
Output: [1,2,3,4,8,12,11,10,9,5,6,7]
```

### Constraints

* m == matrix.length
* n == matrix[i].length
* 1 <= m, n <= 10
* -100 <= matrix[i][j] <= 100

### C++ 

```
class Solution {
protected:
    vector<vector<string>> ret;
    vector<bool> usedRow;
    vector<bool> usedCol;
    vector<bool> posRate; //斜率 1
    vector<bool> negRate; //斜率-1
    int rOffset{0};

    void dfs(vector<string>& board, const int& row, const int& target){

        if(row == target){
            ret.emplace_back(board);
            return;
        }
        /* 第col = 0 開始找能放的位置*/        
        for(int col = 0; col < target; ++col){
            const int&& pos = col - row + rOffset;
            const int&& neg = row + col;
            if(usedRow[row] == true || usedCol[col] == true || posRate[pos] == true || negRate[neg] == true)
                continue;

            board[row][col] = 'Q';
            usedRow[row] = true;
            usedCol[col] = true;
            posRate[pos] = true;
            negRate[neg] = true;           
            
            dfs(board, row + 1, target);

            /* 回溯*/
            board[row][col] = '.';
            usedRow[row] = false;
            usedCol[col] = false;
            posRate[pos] = false;
            negRate[neg] = false;
        }    
                
    }
public:
    vector<vector<string>> solveNQueens(int n) {    

        /* 每一row只放一個 */
        int&& range = n / 2 + (n & 1);
        int&& rateLen = 2 * n - 1;
        rOffset = rateLen / 2;
        /*標記不能再使用使的行列斜率*/
        usedRow.resize(n, false);
        usedCol.resize(n, false);
        posRate.resize(rateLen, false);
        negRate.resize(rateLen, false);

        string blank;
        for(int i = 0; i < n; ++i)
            blank += ".";

        vector<string> board(n, blank);
        
        //從row = 0開始放
        dfs(board, 0, n);


        return ret;
    }
};
```
